"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[501],{63:(e,t,r)=>{var a=r(7260);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},4294:(e,t,r)=>{r.d(t,{A:()=>o});var a=r(2115);let n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:l=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:d="",children:c,iconNode:u,...h}=e;return(0,a.createElement)("svg",{ref:t,...s,width:l,height:l,stroke:r,strokeWidth:i?24*Number(o)/Number(l):o,className:n("lucide",d),...h},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let r=(0,a.forwardRef)((r,s)=>{let{className:o,...i}=r;return(0,a.createElement)(l,{ref:s,iconNode:t,className:n("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),o),...i})});return r.displayName="".concat(e),r}},4652:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return i},getImageProps:function(){return o}});let a=r(8140),n=r(5040),s=r(1356),l=a._(r(1124));function o(e){let{props:t}=(0,n.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let i=s.Image},4898:(e,t,r)=>{r.d(t,{e:()=>x});var a=r(5155),n=r(2115),s=r(2619),l=r.n(s),o=r(5239),i=r(63),d=r(4294);let c=(0,d.A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),u=(0,d.A)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),h=(0,d.A)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);var m=r(5380),f=r(5485);function x(e){let{children:t}=e,{user:r,logout:s,isAuthenticated:d,loading:u}=(0,m.A)();(0,i.usePathname)();let h=(0,i.useRouter)();return((0,n.useEffect)(()=>{u||d||h.push("/login")},[d,u,h]),u)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#F2F2F2]",children:(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-[#FF5500] border-t-transparent rounded-full animate-spin"})}):d?(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-[#F2F2F2]",children:[(0,a.jsx)("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(l(),{href:"/dashboard",className:"flex items-center space-x-2",children:(0,a.jsx)("div",{className:"h-12 md:h-14 overflow-hidden flex items-center",children:(0,a.jsx)(o.default,{src:"/sc toolkit transparent .png",alt:"SC Toolkit",width:160,height:56,className:"h-24 md:h-28 w-auto object-contain -my-6 md:-my-7",priority:!0})})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 relative",children:[(0,a.jsx)(l(),{href:"/dashboard",className:"p-2 rounded text-[#666666] hover:text-[#FF5500] transition",children:(0,a.jsx)(c,{className:"w-5 h-5"})}),r&&(0,a.jsx)(p,{user:{name:r.display_name,avatar:r.avatar_url},onLogout:s})]})]})})}),(0,a.jsx)("main",{className:"flex-1",children:t})]}):null}function p(e){let{user:t,onLogout:r}=e,[s,l]=(0,n.useState)(!1),{theme:o,toggleTheme:i}=(0,f.D)();return(0,n.useEffect)(()=>{if(!s)return;let e=e=>{e.target.closest(".profile-menu-container")||l(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[s]),(0,a.jsxs)("div",{className:"relative profile-menu-container",children:[(0,a.jsxs)("button",{onClick:()=>l(e=>!e),className:"flex items-center gap-2 p-1 rounded",children:[(0,a.jsx)("img",{src:t.avatar,alt:t.name,className:"w-8 h-8 rounded-full border-2 border-[#FF5500]"}),(0,a.jsx)("span",{className:"text-sm hidden sm:block text-[#666666]",children:t.name})]}),s&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg p-1 shadow-lg z-50 border border-gray-200",children:[(0,a.jsx)("button",{onClick:()=>{i(),l(!1)},className:"w-full text-left px-3 py-2 rounded hover:bg-gray-100 flex items-center gap-2 text-[#333333]",children:"dark"===o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Light Mode"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Dark Mode"})]})}),(0,a.jsx)("div",{className:"border-t my-1 border-gray-200"}),(0,a.jsx)("button",{disabled:!0,className:"w-full text-left px-3 py-2 rounded opacity-60 cursor-not-allowed text-[#666666]",children:"Profile"}),(0,a.jsx)("button",{onClick:r,className:"w-full text-left px-3 py-2 rounded hover:bg-gray-100 text-[#333333]",children:"Logout"})]})]})}},5239:(e,t,r)=>{r.d(t,{default:()=>n.a});var a=r(4652),n=r.n(a)},5380:(e,t,r)=>{r.d(t,{A:()=>d,O:()=>i});var a=r(5155),n=r(2115),s=r(5704);let l=(0,n.createContext)(void 0),o=s.env.NEXT_PUBLIC_API_BASE||"";function i(e){let{children:t}=e,[r,s]=(0,n.useState)(!1),[i,d]=(0,n.useState)(null),[c,u]=(0,n.useState)(!0);(0,n.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await fetch("".concat(o,"/api/auth/me"),{credentials:"include"});if(e.ok){let t=await e.json();d({id:t.userId,username:t.username,avatar_url:t.avatarUrl||"",display_name:t.displayName||t.username}),s(!0)}else s(!1),d(null)}catch(e){console.error("Auth check failed:",e),s(!1),d(null)}finally{u(!1)}},m=async()=>{try{await fetch("".concat(o,"/api/auth/logout"),{method:"POST",credentials:"include"})}catch(e){console.error("Logout failed:",e)}finally{d(null),s(!1)}};return(0,a.jsx)(l.Provider,{value:{isAuthenticated:r,user:i,login:()=>{window.location.href="".concat(o,"/api/auth/login")},logout:m,loading:c},children:t})}function d(){let e=(0,n.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5485:(e,t,r)=>{r.d(t,{D:()=>o,N:()=>l});var a=r(5155),n=r(2115);let s=(0,n.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,n.useState)("light"),[o,i]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{let e=localStorage.getItem("theme");e?l(e):window.matchMedia("(prefers-color-scheme: dark)").matches&&l("dark"),i(!0)},[]),(0,n.useEffect)(()=>{o&&(document.documentElement.classList.toggle("dark","dark"===r),localStorage.setItem("theme",r))},[r,o]),o)?(0,a.jsx)(s.Provider,{value:{theme:r,toggleTheme:()=>{l(e=>"light"===e?"dark":"light")}},children:t}):(0,a.jsx)(a.Fragment,{children:t})}function o(){let e=(0,n.useContext)(s);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},6204:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(4294).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])}}]);