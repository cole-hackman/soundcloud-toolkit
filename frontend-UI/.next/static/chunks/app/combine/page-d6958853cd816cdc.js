(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[928],{454:(e,t,l)=>{"use strict";l.d(t,{A:()=>s});let s=(0,l(4294).A)("Combine",[["path",{d:"M10 18H5a3 3 0 0 1-3-3v-1",key:"ru65g8"}],["path",{d:"M14 2a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2",key:"e30een"}],["path",{d:"M20 2a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2",key:"2ahx8o"}],["path",{d:"m7 21 3-3-3-3",key:"127cv2"}],["rect",{x:"14",y:"14",width:"8",height:"8",rx:"2",key:"1b0bso"}],["rect",{x:"2",y:"2",width:"8",height:"8",rx:"2",key:"1x09vl"}]])},1516:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>h});var s=l(5155),a=l(2115),r=l(2619),i=l.n(r),d=l(2251),n=l(6204);let c=(0,l(4294).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var o=l(454),x=l(4898);let m=l(5704).env.NEXT_PUBLIC_API_BASE||"";function h(){let[e,t]=(0,a.useState)([]),[l,r]=(0,a.useState)(""),[h,u]=(0,a.useState)(!1),[b,g]=(0,a.useState)(!1),[p,y]=(0,a.useState)([]),[j,f]=(0,a.useState)(!0),[N,v]=(0,a.useState)(null);(0,a.useEffect)(()=>{w()},[]);let w=async()=>{try{let e=await fetch("".concat(m,"/api/playlists"),{credentials:"include"});if(e.ok){let t=await e.json();y(t.collection||[])}}catch(e){console.error("Failed to fetch playlists:",e)}finally{f(!1)}},k=e=>{let l=Number(e.id);t(t=>t.find(e=>Number(e.id)===l)?t.filter(e=>Number(e.id)!==l):[...t,{...e,id:l}])},F=async()=>{if(!(e.length<2)&&l.trim()){u(!0);try{let t=await fetch("".concat(m,"/api/playlists/merge"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({sourcePlaylistIds:e.map(e=>e.id),title:l})});if(t.ok){let e=await t.json();v(e),g(!0)}else{let e=await t.json();console.error("Failed to merge playlists:",e),alert("Failed to merge playlists")}}catch(e){console.error("Error merging playlists:",e),alert("An error occurred. Please try again.")}finally{u(!1)}}},C=e.reduce((e,t)=>e+(t.track_count||0),0);if(b){var S,A,P;let e=(null==N?void 0:N.playlists)||((null==N?void 0:N.playlist)?[N.playlist]:[]),a=e.length,n=(null==N||null==(S=N.stats)?void 0:S.totalTracks)||(null==N||null==(A=N.stats)?void 0:A.finalCount)||(null==N?void 0:N.totalTracks)||0;return(0,s.jsx)(x.e,{children:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center px-6 py-12 bg-[#F2F2F2]",children:(0,s.jsx)("div",{className:"max-w-2xl w-full",children:(0,s.jsxs)("div",{className:"text-center rounded-2xl p-10 shadow-xl border-2 bg-white border-gray-200",children:[(0,s.jsx)("div",{className:"w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6 bg-gradient-to-br from-[#22c55e] to-[#16a34a] shadow-lg",children:(0,s.jsx)(d.A,{className:"w-12 h-12 text-white"})}),(0,s.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-4 text-[#333333]",children:a>1?"".concat(a," Playlists Created!"):"Playlist Created!"}),(0,s.jsx)("p",{className:"text-lg mb-8 leading-relaxed text-[#666666]",children:a>1?(0,s.jsxs)(s.Fragment,{children:["Split into ",a," playlists (500 tracks each)."]}):(0,s.jsxs)(s.Fragment,{children:['"',(null==(P=e[0])?void 0:P.title)||l,'" has been created with ',n," tracks (duplicates removed)"]})}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,s.jsx)(i(),{href:"/dashboard",className:"px-8 py-3 rounded-lg font-semibold transition-all bg-gradient-to-r from-[#FF5500] to-[#E64A00] text-white hover:shadow-lg",children:"Back to Dashboard"}),(0,s.jsx)("button",{onClick:()=>{g(!1),t([]),r(""),v(null)},className:"px-8 py-3 rounded-lg font-semibold transition-all border-2 border-gray-200 text-[#333333] hover:border-[#FF5500]",children:"Merge More Playlists"})]})]})})})})}return(0,s.jsx)(x.e,{children:(0,s.jsx)("div",{className:"min-h-screen bg-[#F2F2F2]",children:(0,s.jsxs)("div",{className:"container mx-auto px-6 py-12 max-w-6xl",children:[(0,s.jsxs)("div",{className:"mb-12",children:[(0,s.jsxs)(i(),{href:"/dashboard",className:"inline-flex items-center gap-2 text-[#666666] hover:text-[#FF5500] transition mb-6",children:[(0,s.jsx)(n.A,{className:"w-5 h-5"}),"Back to Dashboard"]}),(0,s.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-4 text-[#333333]",children:"Combine Playlists"}),(0,s.jsx)("p",{className:"text-lg text-[#666666]",children:"Select playlists to merge into one. Duplicates will be automatically removed."})]}),(0,s.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 border-2 border-gray-200",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-[#333333]",children:"Your Playlists"}),j?(0,s.jsx)("div",{className:"space-y-3",children:Array.from({length:5}).map((e,t)=>(0,s.jsx)("div",{className:"h-16 bg-gray-100 rounded-lg animate-pulse"},t))}):0===p.length?(0,s.jsx)("p",{className:"text-[#666666] py-8 text-center",children:"No playlists found. Create some playlists on SoundCloud first."}):(0,s.jsx)("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:p.map(t=>{let l=e.some(e=>Number(e.id)===Number(t.id));return(0,s.jsxs)("button",{onClick:()=>k(t),className:"w-full flex items-center gap-4 p-4 rounded-xl transition-all ".concat(l?"bg-[#FF5500]/10 border-2 border-[#FF5500]":"bg-gray-50 border-2 border-transparent hover:border-gray-200"),children:[(0,s.jsx)("img",{src:t.artwork_url||t.coverUrl||"/SC Toolkit Icon.png",alt:t.title,className:"w-12 h-12 rounded-lg object-cover"}),(0,s.jsxs)("div",{className:"flex-1 text-left",children:[(0,s.jsx)("div",{className:"font-semibold text-[#333333]",children:t.title}),(0,s.jsxs)("div",{className:"text-sm text-[#666666]",children:[t.track_count," tracks"]})]}),l&&(0,s.jsx)("div",{className:"w-6 h-6 rounded-full bg-[#FF5500] flex items-center justify-center",children:(0,s.jsx)(d.A,{className:"w-4 h-4 text-white"})})]},t.id)})})]})}),(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 border-2 border-gray-200 sticky top-24",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-[#333333]",children:"Merge Settings"}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium mb-2 text-[#666666]",children:["Selected (",e.length,")"]}),0===e.length?(0,s.jsx)("p",{className:"text-sm text-[#999999] py-4 text-center border-2 border-dashed border-gray-200 rounded-lg",children:"Select at least 2 playlists"}):(0,s.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[(0,s.jsx)("span",{className:"text-sm truncate flex-1 text-[#333333]",children:e.title}),(0,s.jsx)("button",{onClick:()=>k(e),className:"p-1 hover:bg-gray-200 rounded",children:(0,s.jsx)(c,{className:"w-4 h-4 text-[#666666]"})})]},e.id))})]}),(0,s.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-[#666666]",children:"Total Tracks"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-[#333333]",children:C}),C>500&&(0,s.jsx)("p",{className:"text-xs text-[#FF5500] mt-1",children:"Will be split into multiple playlists (500 max each)"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2 text-[#666666]",children:"New Playlist Name"}),(0,s.jsx)("input",{type:"text",value:l,onChange:e=>r(e.target.value),placeholder:"Enter playlist name...",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-[#FF5500] focus:outline-none transition"})]}),(0,s.jsx)("button",{onClick:F,disabled:e.length<2||!l.trim()||h,className:"w-full py-4 rounded-lg font-semibold transition-all bg-gradient-to-r from-[#FF5500] to-[#E64A00] text-white hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Merging..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.A,{className:"w-5 h-5"}),"Merge Playlists"]})})]})})]})]})})})}},2251:(e,t,l)=>{"use strict";l.d(t,{A:()=>s});let s=(0,l(4294).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},3195:(e,t,l)=>{Promise.resolve().then(l.bind(l,1516))}},e=>{e.O(0,[619,356,501,441,255,358],()=>e(e.s=3195)),_N_E=e.O()}]);