(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[322],{2251:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(4294).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},5657:(e,t,s)=>{Promise.resolve().then(s.bind(s,7723))},7723:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var l=s(5155),a=s(2115),r=s(2619),i=s.n(r),n=s(2251),d=s(6204);let c=(0,s(4294).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var o=s(4898);let x=s(5704).env.NEXT_PUBLIC_API_BASE||"";function h(){let[e,t]=(0,a.useState)([]),[s,r]=(0,a.useState)(new Set),[h,m]=(0,a.useState)(""),[u,b]=(0,a.useState)(!0),[f,g]=(0,a.useState)(!1),[p,j]=(0,a.useState)(!1);(0,a.useEffect)(()=>{y()},[]);let y=async()=>{try{let e=await fetch("".concat(x,"/api/likes"),{credentials:"include"});if(e.ok){let s=await e.json();t(s.collection||[])}}catch(e){console.error("Failed to fetch likes:",e)}finally{b(!1)}},N=async()=>{if(0!==s.size&&h.trim()){g(!0);try{(await fetch("".concat(x,"/api/playlists/from-likes"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({trackIds:Array.from(s),title:h})})).ok?j(!0):alert("Failed to create playlist")}catch(e){console.error("Error creating playlist:",e),alert("An error occurred")}finally{g(!1)}}};return p?(0,l.jsx)(o.e,{children:(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center px-6 py-12 bg-[#F2F2F2]",children:(0,l.jsx)("div",{className:"max-w-2xl w-full text-center",children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl p-10 shadow-xl border-2 border-gray-200",children:[(0,l.jsx)("div",{className:"w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6 bg-gradient-to-br from-[#22c55e] to-[#16a34a] shadow-lg",children:(0,l.jsx)(n.A,{className:"w-12 h-12 text-white"})}),(0,l.jsx)("h1",{className:"text-4xl font-bold mb-4 text-[#333333]",children:"Playlist Created!"}),(0,l.jsxs)("p",{className:"text-lg mb-8 text-[#666666]",children:['"',h,'" has been created with'," ",s.size," tracks."]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,l.jsx)(i(),{href:"/dashboard",className:"px-8 py-3 rounded-lg font-semibold bg-gradient-to-r from-[#FF5500] to-[#E64A00] text-white hover:shadow-lg transition",children:"Back to Dashboard"}),(0,l.jsx)("button",{onClick:()=>{j(!1),r(new Set),m("")},className:"px-8 py-3 rounded-lg font-semibold border-2 border-gray-200 text-[#333333] hover:border-[#FF5500] transition",children:"Create Another"})]})]})})})}):(0,l.jsx)(o.e,{children:(0,l.jsx)("div",{className:"min-h-screen bg-[#F2F2F2]",children:(0,l.jsxs)("div",{className:"container mx-auto px-6 py-12 max-w-6xl",children:[(0,l.jsxs)("div",{className:"mb-12",children:[(0,l.jsxs)(i(),{href:"/dashboard",className:"inline-flex items-center gap-2 text-[#666666] hover:text-[#FF5500] transition mb-6",children:[(0,l.jsx)(d.A,{className:"w-5 h-5"}),"Back to Dashboard"]}),(0,l.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-4 text-[#333333]",children:"Likes → Playlist"}),(0,l.jsx)("p",{className:"text-lg text-[#666666]",children:"Convert your liked tracks into an organized playlist."})]}),(0,l.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,l.jsx)("div",{className:"lg:col-span-2",children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl p-6 border-2 border-gray-200",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsxs)("h2",{className:"text-xl font-bold text-[#333333]",children:["Your Liked Tracks (",e.length,")"]}),(0,l.jsx)("button",{onClick:()=>{s.size===e.length?r(new Set):r(new Set(e.map(e=>e.id)))},className:"text-sm text-[#FF5500] hover:underline",children:s.size===e.length?"Deselect All":"Select All"})]}),u?(0,l.jsx)("div",{className:"space-y-3",children:Array.from({length:10}).map((e,t)=>(0,l.jsx)("div",{className:"h-16 bg-gray-100 rounded-lg animate-pulse"},t))}):0===e.length?(0,l.jsx)("p",{className:"text-[#666666] py-8 text-center",children:"No liked tracks found."}):(0,l.jsx)("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:e.map(e=>{var t;let a=s.has(e.id);return(0,l.jsxs)("button",{onClick:()=>{var t;return t=e.id,void r(e=>{let s=new Set(e);return s.has(t)?s.delete(t):s.add(t),s})},className:"w-full flex items-center gap-4 p-3 rounded-xl transition-all ".concat(a?"bg-[#FF5500]/10 border-2 border-[#FF5500]":"bg-gray-50 border-2 border-transparent hover:border-gray-200"),children:[(0,l.jsx)("img",{src:e.artwork_url||"/SC Toolkit Icon.png",alt:e.title,className:"w-12 h-12 rounded-lg object-cover"}),(0,l.jsxs)("div",{className:"flex-1 text-left min-w-0",children:[(0,l.jsx)("div",{className:"font-semibold text-[#333333] truncate",children:e.title}),(0,l.jsxs)("div",{className:"text-sm text-[#666666] truncate",children:[null==(t=e.user)?void 0:t.username," •"," ",(e=>{let t=Math.floor(e/6e4),s=Math.floor(e%6e4/1e3);return"".concat(t,":").concat(s.toString().padStart(2,"0"))})(e.duration)]})]}),a&&(0,l.jsx)("div",{className:"w-6 h-6 rounded-full bg-[#FF5500] flex items-center justify-center flex-shrink-0",children:(0,l.jsx)(n.A,{className:"w-4 h-4 text-white"})})]},e.id)})})]})}),(0,l.jsx)("div",{className:"lg:col-span-1",children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl p-6 border-2 border-gray-200 sticky top-24",children:[(0,l.jsx)("h2",{className:"text-xl font-bold mb-4 text-[#333333]",children:"Create Playlist"}),(0,l.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,l.jsx)("div",{className:"text-sm text-[#666666]",children:"Selected Tracks"}),(0,l.jsx)("div",{className:"text-2xl font-bold text-[#333333]",children:s.size})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-2 text-[#666666]",children:"Playlist Name"}),(0,l.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),placeholder:"Enter playlist name...",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-[#FF5500] focus:outline-none transition"})]}),(0,l.jsx)("button",{onClick:N,disabled:0===s.size||!h.trim()||f,className:"w-full py-4 rounded-lg font-semibold transition-all bg-gradient-to-r from-[#FF5500] to-[#E64A00] text-white hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:f?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c,{className:"w-5 h-5"}),"Create Playlist"]})})]})})]})]})})})}}},e=>{e.O(0,[619,356,501,441,255,358],()=>e(e.s=5657)),_N_E=e.O()}]);