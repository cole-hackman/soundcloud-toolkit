(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[917],{2944:(e,t,a)=>{Promise.resolve().then(a.bind(a,2969))},2969:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var s=a(5155),l=a(2115),r=a(2619),i=a.n(r),c=a(6204),d=a(6910),n=a(4294);let o=(0,n.A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),h=(0,n.A)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),x=(0,n.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var m=a(4898);let p=a(5704).env.NEXT_PUBLIC_API_BASE||"";function y(){let[e,t]=(0,l.useState)([]),[a,r]=(0,l.useState)(null),[n,y]=(0,l.useState)([]),[u,g]=(0,l.useState)(!0),[v,b]=(0,l.useState)(!1),[j,f]=(0,l.useState)(!1);(0,l.useEffect)(()=>{N()},[]);let N=async()=>{try{let e=await fetch("".concat(p,"/api/playlists"),{credentials:"include"});if(e.ok){let a=await e.json();t(a.collection||[])}}catch(e){console.error("Failed to fetch playlists:",e)}finally{g(!1)}},k=async e=>{b(!0);try{let t=await fetch("".concat(p,"/api/playlists/").concat(e,"/tracks"),{credentials:"include"});if(t.ok){let e=await t.json();y(e.tracks||[])}}catch(e){console.error("Failed to fetch tracks:",e)}finally{b(!1)}},w=(e,t)=>{let a=[...n],s="up"===t?e-1:e+1;s<0||s>=n.length||([a[e],a[s]]=[a[s],a[e]],y(a))},S=async()=>{if(a){f(!0);try{(await fetch("".concat(p,"/api/playlists/").concat(a.id,"/reorder"),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({trackIds:n.map(e=>e.id)})})).ok?alert("Playlist saved successfully!"):alert("Failed to save playlist")}catch(e){console.error("Error saving playlist:",e),alert("An error occurred")}finally{f(!1)}}};return(0,s.jsx)(m.e,{children:(0,s.jsx)("div",{className:"min-h-screen bg-[#F2F2F2]",children:(0,s.jsxs)("div",{className:"container mx-auto px-6 py-12 max-w-6xl",children:[(0,s.jsxs)("div",{className:"mb-12",children:[(0,s.jsxs)(i(),{href:"/dashboard",className:"inline-flex items-center gap-2 text-[#666666] hover:text-[#FF5500] transition mb-6",children:[(0,s.jsx)(c.A,{className:"w-5 h-5"}),"Back to Dashboard"]}),(0,s.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-4 text-[#333333]",children:"Playlist Modifier"}),(0,s.jsx)("p",{className:"text-lg text-[#666666]",children:"Reorder, remove, and reorganize tracks in your playlists."})]}),a?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>{r(null),y([])},className:"text-[#666666] hover:text-[#FF5500] transition",children:"← Back to playlists"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-[#333333]",children:a.title})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("button",{onClick:()=>{y([...n].sort(()=>Math.random()-.5))},className:"px-4 py-2 rounded-lg border-2 border-gray-200 hover:border-[#FF5500] transition flex items-center gap-2 text-[#333333]",children:[(0,s.jsx)(d.A,{className:"w-4 h-4"}),"Shuffle"]}),(0,s.jsxs)("button",{onClick:S,disabled:j,className:"px-6 py-2 rounded-lg bg-gradient-to-r from-[#FF5500] to-[#E64A00] text-white hover:shadow-lg transition flex items-center gap-2 disabled:opacity-50",children:[j?(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,s.jsx)(o,{className:"w-4 h-4"}),"Save Changes"]})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-2xl p-6 border-2 border-gray-200",children:v?(0,s.jsx)("div",{className:"space-y-3",children:Array.from({length:10}).map((e,t)=>(0,s.jsx)("div",{className:"h-16 bg-gray-100 rounded-lg animate-pulse"},t))}):0===n.length?(0,s.jsx)("p",{className:"text-[#666666] py-8 text-center",children:"This playlist has no tracks."}):(0,s.jsx)("div",{className:"space-y-2",children:n.map((e,t)=>{var a;return(0,s.jsxs)("div",{className:"flex items-center gap-4 p-3 rounded-xl bg-gray-50 group",children:[(0,s.jsx)("span",{className:"w-8 text-center text-sm text-[#999999]",children:t+1}),(0,s.jsx)("img",{src:e.artwork_url||"/SC Toolkit Icon.png",alt:e.title,className:"w-12 h-12 rounded-lg object-cover"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"font-semibold text-[#333333] truncate",children:e.title}),(0,s.jsxs)("div",{className:"text-sm text-[#666666] truncate",children:[null==(a=e.user)?void 0:a.username," •"," ",(e=>{let t=Math.floor(e/6e4),a=Math.floor(e%6e4/1e3);return"".concat(t,":").concat(a.toString().padStart(2,"0"))})(e.duration)]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition",children:[(0,s.jsx)("button",{onClick:()=>w(t,"up"),disabled:0===t,className:"p-2 hover:bg-gray-200 rounded disabled:opacity-30",children:(0,s.jsx)(h,{className:"w-4 h-4 rotate-180"})}),(0,s.jsx)("button",{onClick:()=>w(t,"down"),disabled:t===n.length-1,className:"p-2 hover:bg-gray-200 rounded disabled:opacity-30",children:(0,s.jsx)(h,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>{var t;return t=e.id,void y(e=>e.filter(e=>e.id!==t))},className:"p-2 hover:bg-red-100 rounded text-red-500",children:(0,s.jsx)(x,{className:"w-4 h-4"})})]})]},e.id)})})})]}):(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 border-2 border-gray-200",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-[#333333]",children:"Select a Playlist to Modify"}),u?(0,s.jsx)("div",{className:"space-y-3",children:Array.from({length:5}).map((e,t)=>(0,s.jsx)("div",{className:"h-16 bg-gray-100 rounded-lg animate-pulse"},t))}):0===e.length?(0,s.jsx)("p",{className:"text-[#666666] py-8 text-center",children:"No playlists found."}):(0,s.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:e.map(e=>(0,s.jsxs)("button",{onClick:()=>{r(e),k(e.id)},className:"flex items-center gap-4 p-4 rounded-xl bg-gray-50 border-2 border-transparent hover:border-[#FF5500] transition-all text-left",children:[(0,s.jsx)("img",{src:e.artwork_url||"/SC Toolkit Icon.png",alt:e.title,className:"w-16 h-16 rounded-lg object-cover"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-semibold text-[#333333]",children:e.title}),(0,s.jsxs)("div",{className:"text-sm text-[#666666]",children:[e.track_count," tracks"]})]})]},e.id))})]})]})})})}},6910:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(4294).A)("Shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]])}},e=>{e.O(0,[619,356,501,441,255,358],()=>e(e.s=2944)),_N_E=e.O()}]);